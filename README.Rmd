---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, 
  comment = "#>",
  fig.path = "README-"  
)
```

# janitor
***********************
[![Travis-CI Build Status](https://travis-ci.org/sfirke/janitor.svg?branch=master)](https://travis-ci.org/sfirke/janitor)
[![Coverage Status](https://img.shields.io/codecov/c/github/sfirke/janitor/master.svg)](https://codecov.io/github/sfirke/janitor?branch=master)


Some packages have complex or powerful functions.  janitor has simple little functions to make data cleaning easier.

## Installation

janitor is not yet on CRAN.  Install the development version from GitHub:

```{r, eval = FALSE}
# install.packages("devtools")
install_github("sfirke/janitor")
```


## Overview

The janitor package has functions for examining and cleaning data.

### Examining

* Get the frequency table for a variable with `tabyl()`.  A fully-featured version of `table()`.

\* Isolate records with duplicated combinations of variables with `get_dupes()`.  E.g., *employee_id* can occur more than once, and *year* can occur more than once, but there should be no records that share the same values for both variables.

* Coming soon: `crosstab()`, `top_2()`


### Cleaning

* Clean data.frame names with `clean_names()`.  Call this every time you read in data.

* Clean miscoded `NA` values with `clean_NA_variants()`.  It converts the character values `"NA"`, `"#N/A"`, `"N/A"`, `"n/a"`, `"#NAME?"` to true `NA` missing values, and also accepts additional user-specified strings to convert.

* Remove entirely empty rows with `remove_empty_rows()` and empty columns with `remove_empty_cols()`.

* Convert dates incorrectly stored as serial numbers to Date class with `excel_numeric_to_date()`, e.g., turning `42500` into `"2016-05-10"`.

* If working with `labelled`-class variables created by using the [haven](http://www.github.com/hadley/haven) package to read SPSS `.sav` files, convert a mixed data.frame to 100% factors using `labelled_to_factors()`.


## janitor in action
*Doesn't currently showcase most of the functions above.  Will become a vignette...*

Start with some dirty data:

```{r, message = FALSE, warning = FALSE}
# load demo packages using the pacman package
if (!require("pacman")) install.packages("pacman"); library(pacman)
p_load(janitor, dplyr, readr)

# read sample dirty data file
starting_df <- read_csv("https://raw.github.com/sfirke/janitor/master/sample/dirty.csv")

# take a look at the messy data
dplyr::glimpse(starting_df)

```

This data.frame is dirty in several ways:

* The 7th column is entirely `NA` values
* There are several `NA` rows left by blank rows used in the layout of the .csv
* Variable names contain spaces and other illegal name characters
* The match date is stored as a serial number.
* Duplicate names will cause dplyr calls to fail:
```{r, error = TRUE}
starting_df %>% mutate(year = 2016)
```


Now clean it with janitor:

```{r}
clean_df <- starting_df %>%
  clean_names %>%
  remove_empty_rows %>%
  remove_empty_cols %>%
  mutate(match_date = excel_numeric_to_date(match_date))

# the data.frame is now clean, with proper names:
glimpse(clean_df)

```
